# Changes

## 6.2.4

### Application Changes

- Update `wwdtm-theme` to set font weight for header and footer navigation links to `500`
- Tweak responsive font sizing for `root` in `wwdtm-theme` with a range of 14.5px and 16.75px

## 6.2.3

### Application Changes

- Re-add responsive font sizing for `:root` in `wwdtm-theme` with a range of 14px and 16.5px

## 6.2.2

### Application Changes

- Remove responsive font sizing for `:root` in `wwdtm-theme`

### Development Changes

- Upgrade ruff from 0.7.0 to 0.7.4

## 6.2.1

### Application Changes

- Rename "Best Of Repeats" to "Repeat Best Ofs" pages and routes
- Add a redirect for `/shows/best-of-repeats` to point to `/shows/repeat-best-ofs`

### Component Changes

- Upgrade wwdtm from 2.13.0 to 2.14.0

### Development Changes

- Add missing tests for Best Of, Repeat Best Of and Repeat Shows pages

## 6.2.0

### Application Changes

- Adding Best Of, Best Of Repeat and Repeat Shows pages
- Initial support for Python 3.13

### Component Changes

- Upgrade wwdtm from 2.12.1.post0 to 2.13.0

### Development Changes

- Upgrade black from 24.8.0 to 24.10.0
- Upgrade ruff from 0.6.9 to 0.7.0
- Increase minimum pytest version from 8.0 to 8.3 in `pyproject.toml`
- Add `py313` to `tool.black.target-version`

## 6.1.0

### Application Changes

- Replace all references of `named_tuple=` in database cursors to `dictionary=` due to cursors using `NamedTuple` being marked for deprecation in future versions of MySQL Connector/Python

### Component Changes

- Upgrade wwdtm from 2.11.0 to 2.12.1.post0

### Development Changes

- Upgrade black from 24.4.2 to 24.8.0
- Upgrade pytest from 8.1.2 to 8.3.3
- Upgrade ruff from 0.6.7 to 0.6.9
- Add initial pytest coverage reporting using `pytest-cov`, which can be generated by running: `pytest --cov=app tests/`

## 6.0.2

### Application Changes

- Fix ordering of locations due to a bug found in `wwdtm` version 2.10.1
- Change ordering of locations for `/locations/all` to respect the value of `settings.sort_by_venue` in `config.json`
- Fix issue where "N/A" is not shown when a location does not have any recordings

### Component Changes

- Upgrade wwdtm from 2.10.1 to 2.11.0

### Development Changes

- Upgrade ruff from 0.5.1 to 0.6.7

## 6.0.1-post0

### Application Changes

- This non-release does not include any application changes. The version number presented by the application will still be [6.0.1](https://github.com/questionlp/stats.wwdt.me/releases/tag/v6.0.1).

### Development Changes

- Removal of the `serve` NPM package as it is not used and one of its dependencies requires a package that has a [high severity vulnerability](https://github.com/advisories/GHSA-9wv6-86v2-598j).

## 6.0.1

### Application Changes

- Fix an error caused by checking the wrong variable for `panelists.routes.details()`
- Update generated Bootstrap CSS with latest changes

### Development Changes

- Set `max-locals` to 20 for Pylint

## 6.0.0-post0

### Application Changes

- This non-release does not include any application changes. The version number presented by the application will still be [6.0.0](https://github.com/questionlp/stats.wwdt.me/releases/tag/v6.0.0).

### Development Changes

- Contents of the `scss` directory has now been migrated to a new Git repository, [wwdtm-themes](https://github.com/questionlp/wwdtm-themes) and `scss` is now a Git submodule reference.

## 6.0.0

### Application Changes

- Frontend code refactor due to switching from Materialize to Bootstrap
  - Replacing Materialize frontend toolkit with Bootstrap
  - Replacing Materialize Icons with Bootstrap Icons
  - Refactor the frontend structure to use Bootstrap frontend components and conventions
  - Include the required IBM Plex web fonts with the application to remove use of Google Fonts
- User interface changes
  - Change the behavior of the main navigation to combine navigation links into a single list that are listed in the top navbar on `xl` screen size or in an off-canvas side nav on smaller screens
  - Improve legibility and readability in font size changes and increased color contrast when using the dark mode color theme
  - Include a color theme toggle in the main navigation to allow the reader to switch the theme on-the-fly
  - Remove the rightwards arrow included after links in the main section of the page
  - Change wording of Appearances and Recordings in respective details pages and provide additional information via Bootstrap tooltip
  - Add Bootstrap tooltip to Not My Job guest scoring exception marker
  - Render show description and notes text as Markdown
  - De-emphasize the DB ID badge by changing the background color to blend in, instead of contrasting, with the background
  - Remove "Home" from all navigational breadcrumbs
  - Remove zero-padded dates from navigational breadcrumbs
- Fix warnings and errors reported by pylint
- Fix an issue where `use_decimal_scores` was not being passed through to the recent shows view
- Add an experimental `block_ai_scrapers` config key that will block known AI scraping and crawling bots (default: false)

### Component Changes

- Upgrade gunicorn from 22.0.0 to 23.0.0
- Replace Materialize CSS 1.2.2 with Bootstrap 5.3.3
  - Existing Materialize CSS and JS files will be preserved to prevent cached versions of the application from breaking
  - Materialize-related files will be removed in a future minor release

## 5.13.4

### Application Changes

- Update references to GitHub repository to point to [stats.wwdt.me](https://github.com/questionlp/stats.wwdt.me) instead of `stats.wwdt.me_v5`.

## 5.13.3

### Application Changes

- Move web analytics tags out of `base.html` into `head.html`

## 5.13.2

### Application Changes

- Add Umami `script` tag to errors base template

## 5.13.1

### Application Changes

- Correct Umami `script` tag properties

## 5.13.0

### Application Changes

- Add support for Umami web analytics via `settings.umami_analytics` config object with the following keys:

| Config Key | Description |
| ---------- | ----------- |
| `_enabled` | Set value to `true` to enable adding Umami `script` tag (default: `false`) |
| `url` | URL of the Umami analytics script |
| `data_website_id` | Umami Site ID |
| `data_auto_track` | Set value to `false` to disable auto event tracking (default: `true`) |
| `data_host_url` | Override the location where Umami data is sent to |
| `data_domains` | Comma-delimited list of domains where the Umami script should be active |

### Component Changes

- Upgrade wwdtm 2.10.0 to 2.10.1

### Development Changes

- Upgrade ruff from 0.3.6 to 0.5.1
- Upgrade black from 24.3.0 to 24.4.2
- Upgrade pytest from 8.1.1 to 8.1.2

## 5.12.1

### Application Changes

- Change the footer font color to remove alpha transparency to improve readability

## 5.12.0

### Application Changes

- Add support for host, panelist and scorekeeper preferred pronouns via a label (aka tag) next to the corresponding ID label in their details page

## 5.11.3

### Component Changes

- Upgrade wwdtm from 2.9.1 to 2.10.0, which requires Wait Wait Stats Database version 4.7 or higher

## 5.11.2

### Application Changes

- Add a link next to the location coordinates that scrolls down to the location map in single location details view

## 5.11.1

### Application Changes

- Change the z-index for the map control area to `500` to prevent the controls from appearing over slide-out navigation or pop-up menus
- Update styles for Leaflet to inherit font-family used for the rest of the application (IBM Plex Sans)

## 5.11.0

### Application Changes

- This version requires version 4.6.1 of the Wait Wait Stats Database, which includes a new `ww_postal_abbreviations` table that is required
- Adding a new section to the location details page that displays a map using Leaflet.js, OpenStreetMap and location longitude/latitude coordinates
- Add a new config key `settings.display_location_map` with a default of `false` as a feature flag for the above new feature
- Move the city and state from the `h2` heading to a new "Located In" field
- Display full state, province or territory name rather than two-letter abbreviation in locations list or in show details page
- Display decimal latitude/latitude coordinates in location details page with DMS coordinates in a tooltip
- Add PNG, SVG and Apple touch icon versions of the application's favicon

### Component Changes

- Adding Leaflet.js 1.9.4
- Upgrade wwdtm from 2.8.2 to 2.9.1

## 5.10.4

### Component Changes

- Upgrade wwdtm from 2.8.1 to 2.8.2
- Upgrade flask from 3.0.0 to 3.0.3
- Upgrade gunicorn from 21.2.0 to 22.0.0

### Development Changes

- Upgrade ruff from 0.1.13 to 0.3.6
- Upgrade pytest from 7.4.4 to 8.1.1

## 5.10.3

### Development Changes

- Upgrade black from 23.12.1 to 24.3.0

## 5.10.2

### Component Changes

- Upgrade wwdtm from 2.8.0 to 2.8.1, which includes fixing an issue of panelists not being sorted by their decimal scores properly

## 5.10.1

### Application Changes

- Add support for GitHub sponsorship link in the side pop-out nav, dropdown nav menu and in the footer by way of the `settings.github_sponsor_url` config key
- Change the how render and version information is rendered on screens with a width less than 1200px to align left rather than right

## 5.10.0

### Application Changes

- Add support for new show URL field from the Wait Wait Stats Database, which is used in place of the `/s/` redirect link if there is a value stored for a particular show
- Add support for Patreon link in the side pop-out nav, dropdown nav menu and in the footer by way of the `settings.patreon_url` config key

### Component Changes

- Upgrade wwdtm from 2.7.0 to 2.8.0

## 5.9.0

### Application Changes

- Add type hints for a majority of the return types for routes and utility modules
- Replace use of `typing.Optional` and `typing.Union` with the with the conventions documented in PEP-484 and PEP-604
- Change handling of `time_zone` configuration value to prevent use of `pytz.timezone()` in function arguments

### Component Changes

- Upgrade wwdtm from 2.6.1 to 2.7.0, which includes:
  - Upgrade numpy from 1.26.0 to 1.26.3
- Upgrade Markdown from 3.5.1 to 3.5.2

### Development Changes

- Switch to Ruff for code linting and formatting (with the help of Black)
- Upgrade pytest from 7.4.3 to 7.4.4
- Upgrade black from 23.11.0 to 23.12.1

### Documentation Changes

- Update the copyright block at the top of each file to remove `coding` line and to include the appropriate SPDX license identifier

## 5.8.1

### Component Changes

- Upgrade wwdtm from 2.6.0 to 2.6.1

## 5.8.0

### Application Changes

- Add support for rendering multiple Bluff the Listener segment results for a given show

### Component Changes

- Upgrade wwdtm from 2.5.0 to 2.6.0, which requires Wait Wait Stats Database version 4.4 or higher
- Upgrade Markdown from 3.4.3 to 3.5.1

## 5.7.2

### Application Changes

- Fix CSS for list and list item rendering within the show notes

## 5.7.1

### Application Changes

- Remove unneeded slash in an empty tag for the Materialize CSS include

## 5.7.0

**Starting with version 5.7.0, support for all versions of Python prior to 3.10 have been deprecated.**

### Application Changes

- Replace `dateutil.parser.parse` with `datetime.datetime.strptime`

### Component Changes

- Upgrade wwdtm from 2.4.0 to 2.5.0, which drops supports for Python versions prior to 3.10 and includes:
  - Upgrade MySQL Connector/Python from 8.0.33 to 8.2.0
  - Upgrade numpy from 1.24.4 to 1.26.0

### Development Changes

- Upgrade black from 23.10.1 to 23.11.0
- Remove `py38` and `py39` from `tool.black` in `pyproject.toml`

## 5.6.0

### Component Changes

- Upgrade Flask from 2.3.2 to 3.0.0
- Upgrade gunicorn from 20.1.0 to 21.2.0

### Development Changes

- Upgrade pycodestyle from 2.11.0 to 2.11.1
- Upgrade pytest from 7.4.0 to 7.4.3
- Upgrade black from 23.7.0 to 23.10.1

## 5.5.1

### Component Changes

- Upgrade wwdtm from 2.3.0 to 2.4.0

## 5.5.0

### Application Changes

- Add support for displaying panelist Lightning Fill-in-the-Blank starting score and correct answers stored in the corresponding new table columns. This is handled via version 2.3.0 of the `wwdtm` library and depends on setting the `use_decimal_scores` setting in the `config.json` application configuration file.

### Component Changes

- Upgrade wwdtm from 2.2.0 to 2.3.0

## 5.4.0

### Application Changes

- Add support for displaying panelist decimal scores stored in a new table column in the Wait Wait Stats Database instead of the standard integer scores. This is handled via version 2.2.0 of the `wwdtm` library and a new `use_decimal_scores` setting in the `config.json` application configuration file. By default, the value will be set to `false` and must be changed to `true`, and the appropriate changes have been deployed to the Wait Wait Stats Database.
- Increase the number of digits displayed after the decimal point for certain panelist statistics from 4 to 5

### Component Changes

- Upgrade wwdtm from 2.1.0 to 2.2.0, which also includes:
  - Upgrade NumPy from 1.23.2 to 1.24.3

### Development Changes

- Upgrade black from 23.3.0 to 23.7.0
- Upgrade flake8 from 6.0.0 to 6.1.0
- Upgrade pycodestyle from 2.10.0 to 2.11.0
- Upgrade pytest from 7.3.1 to 7.4.0

## 5.3.1

### Application Changes

- Revamping of the formatting and styles when printing pages from the site to reduce wasted whitespace and other tweaks, including:
  - Adding site title at the top of the document
  - Update the guest, host, location, panelist, scorekeeper and show info blocks to mimic a two-column layout
  - Change the `main` block to not cause the footer to be pushed to a new page
  - Render the collection lists in a more compact manner
  - Correct a few `color` values for a few types of links

## 5.3.0

### Application Changes

- Add `settings.sort_by_venue` configuration setting that is used to determine whether to sort the locations by venue name or by state and city for the `/locations`. Defaults to `false`, which matches the previous behavior.

### Component Changes

- Upgrade Flask from 2.2.3 to 2.3.2
- Upgrade wwdtm from 2.0.9 to 2.1.0

## 5.2.4

### Component Changes

- Upgrade wwdtm from 2.0.8 to 2.0.9, which also includes the following changes:
  - Upgrade MySQL Connector/Python from 8.0.31 to 8.0.33
  - Upgrade NumPy from 1.23.4 to 1.24.2
  - Upgrade python-slugify from 6.1.2 to 8.0.1
  - Upgrade pytz from 2022.6 to 2023.3
- Upgrade Markdown from 3.4.1 to 3.4.3
- Removed python-dateutil as an explicit requirement as it is being pulled in by the wwdtm package

### Development Changes

- Move pytest configuration from `pytest.ini` into `pyproject.toml`
- Upgrade flake8 from 5.0.4 to 6.0.0
- Upgrade pycodestyle from 2.9.1 to 2.10.0
- Upgrade pytest from 7.2.0 to 7.3.1
- Upgrade black from 22.10.0 to 23.3.0

## 5.2.3

### Component Changes

- Upgrade Materialize from 1.2.1 to 1.2.2

## 5.2.2

### Component Changes

- Upgrade Flask from 2.2.2 to 2.2.3
- Upgrade Werkzeug from 2.2.2 to 2.2.3 to fix a security vulnerability

## 5.2.1

### Other Changes

- Updating copyright year for code files under `tests`

## 5.2.0

### Component Changes

- Upgrade Materialize from 1.1.0 to 1.2.1

### Other Changes

- Updating copyright year for all code files and add copyright block to `static/css/style.css` and `static/js/init.js`

## 5.1.5

### Application Changes

- Continue refactoring how application and database connection settings are loaded and setting default values

### Component Changes

- Upgrade wwdtm from 2.0.7 to 2.0.8, which also includes the following changes:
  - Upgrade MySQL Connector/Python from 8.0.30 to 8.0.31
  - Upgrade NumPy from 1.23.2 to 1.23.4
  - Upgrade python-slugify from 5.0.2 to 6.1.2
  - Upgrade pytz from 2022.2.1 to 2022.6
- Upgrade Flask from 2.2.0 to 2.2.2
- Upgrade Werkzeug from 2.2.1 to 2.2.2

### Development Changes

- Upgrade flake8 from 4.0.1 to 5.0.4
- Upgrade pycodestyle from 2.8.0 to 2.9.1
- Upgrade pytest from 7.1.2 to 7.2.0
- Upgrade black from 22.6.0 to 22.10.0

## 5.1.4

### Application Changes

- Update the URL in footer to use HTTPS instead of HTTP
- Use `dict.get(key, default_value)` in `app/__init__.py` to get/set configuration values in order to avoid application startup errors if configuration keys are not set.
  - Default value for `time_zone` is `UTC`
  - Default values for any URL is an empty string
- Adding `mastodon_url` and `mastodon_user` configuration keys in the `settings` section of the config file.
- If the `mastodon_url` and `mastodon_user` keys contain a value, insert a link with `rel="me"` attribute for profile link validation.

## 5.1.3

### Bugfix

- Fix an issue where the `time_zone` configuration value was being assigned to `settings_config` twice, instead of being assigned to both `settings_config` and `database_config`

## 5.1.2

### Component Changes

- Upgrade wwdtm from 2.0.5 to 2.0.7, which also includes the following changes:
  - Upgrade MySQL Connector/Python from 8.0.28 to 8.0.30
  - Upgrade NumPy from 1.22.3 to 1.23.2
  - Upgrade pytz from 2022.1 to 2022.2.1

## 5.1.1

### Component Changes

- Upgrade Flask to 2.2.0

## 5.1.0

### Component Changes

- Upgrade Werkzeug from 2.1.2 to 2.2.1
- Upgrade Markdown from 3.3.6 to 3.4.1

### Application Changes

- Relocate templates from under `app/templates` to the newly created
  `templates` directory within each section (e.g.: `app/shows/templates/shows`)
  - The templates directory structure will match the new Blueprints structure
    used in [reports.wwdt.me_v2](https://github.com/questionlp/reports.wwdt.me_v2)
- Update guests, hosts, locations, panelists, scorekeepers and shows routes
  and redirects so that canonical routes now have a trailing slash and requests
  made without a trailing slash will get redirected

### Development Changes

- Upgrade pytest from 6.2.5 to 7.1.2
- Add type hinting to pytest scripts
- Upgrade Black from 22.1.0 to 22.6.0
- Change Black `target-version` to remove `py36` and `py37`, and add `py310`

## 5.0.4

### Component Changes

- Upgrade Materialize from 1.1.0-alpha to 1.1.0
- Upgrade Flask from 2.1.1 to 2.1.3
- Set Werkzeug version to 2.1.2
  - Version 2.2.0 includes a breaking change regarding route parsing and handling

## 5.0.3

### Component Changes

- Upgrade wwdtm from 2.0.2 to 2.0.5
- Upgrade Flask from 2.0.2 to 2.1.1
- Upgrade pytz from 2021.3 to 2022.1

## 5.0.2

### Application Changes

- Change "API Docs" links on the site to read "API"

## 5.0.1

### Application Changes

- Update the Site History page to include version 5.0
- Update the link to the GitHub repository

## 5.0.0

### Component Changes

- Replace (lib)wwdtm 1.2.x with wwdtm 2.0.2
- Upgrade Flask from 2.0.1 to 2.0.2
- Upgrade Materialize from 1.0.0 to 1.1.0-alpha

### Application Changes

- Complete restructuring of the Flask application to use Blueprints
  design pattern
- Convert the application from using uWSGI to serve the application to
  Gunicorn to match the changes made with the Wait Wait Stats API

### Development Changes

- Adding tests by way of `pytest`
